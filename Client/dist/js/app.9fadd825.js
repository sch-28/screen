(function(t){function e(e){for(var i,o,a=e[0],c=e[1],d=e[2],h=0,l=[];h<a.length;h++)o=a[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&l.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(l.length)l.shift()();return s.push.apply(s,d||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],i=!0,a=1;a<r.length;a++){var c=r[a];0!==n[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var i={},n={app:0},s=[];function o(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=i,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var d=0;d<a.length;d++)e(a[d]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"51cd":function(t,e,r){"use strict";r("7633")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-main",[r("router-view")],1)],1)},s=[],o={name:"App",data:function(){return{}}},a=o,c=(r("034f"),r("2877")),d=r("6544"),u=r.n(d),h=r("7496"),l=r("f6c4"),v=Object(c["a"])(a,n,s,!1,null,null,null),p=v.exports;u()(v,{VApp:h["a"],VMain:l["a"]});var f=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"wrapper"},[r("video",{ref:"videoStream",staticStyle:{display:"none"},attrs:{autoplay:""}}),r("video",{ref:"videoPreview",staticStyle:{display:"none"},attrs:{autoplay:"",controls:"",width:"600"}}),r("div",{staticClass:"canvas-wrapper"},[r("canvas",{ref:"canvas"})]),r("div",{staticClass:"control-wrapper"},[r("span",[t._v(t._s(t.duration))]),r("recordButton",{attrs:{disabled:!t.videoStreamSrc},on:{toggle:function(e){return t.toggleRecording()}},model:{value:t.startRecord,callback:function(e){t.startRecord=e},expression:"startRecord"}}),r("v-btn",{staticClass:"window-button",on:{click:t.askForWindow}},[t._v("Change Window")])],1)])},w=[],b=(r("d3b7"),r("159b"),r("b64b"),r("7db0"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"button",class:t.clicked?"button pause":"button",style:t.disabled?"border-color: transparent transparent transparent gray;":"",on:{click:t.buttonClick}})}),g=[],P={data:function(){return{clicked:!1}},props:{record:Boolean,disabled:Boolean},model:{prop:"record",event:"toggle"},methods:{buttonClick:function(){this.clicked=!this.clicked,this.$emit("toggle",this.clicked)}}},y=P,S=(r("b313"),Object(c["a"])(y,b,g,!1,null,"3c1b6114",null)),x=S.exports,k={name:"Home",data:function(){return{scale:{x:1,y:1},mouseDown:!1,mousePosition:{x:0,y:0},rect:{startX:0,startY:0,endX:0,endY:0},rectPreview:{startX:0,startY:0,endX:1920,endY:1080},startRecord:!1,recorder:null,videoStreamSrc:null,timer:null,startTime:0,duration:"00:00:00"}},computed:{videoStream:function(){var t;return null===(t=this.$refs)||void 0===t?void 0:t.videoStream},canvas:function(){var t;return null===(t=this.$refs)||void 0===t?void 0:t.canvas},videoPreview:function(){var t;return null===(t=this.$refs)||void 0===t?void 0:t.videoStream},ctx:function(){return this.$refs.canvas.getContext("2d")},rectPreviewHeight:function(){return this.rectPreview.endY-this.rectPreview.startY},rectPreviewWidth:function(){return this.rectPreview.endX-this.rectPreview.startX}},components:{recordButton:x},mounted:function(){this.askForWindow()},methods:{updateTimer:function(){var t=new Date(Date.now()-this.startTime);t.setHours(0),this.duration=t.toLocaleTimeString()},askForWindow:function(){this.reset(),this.videoStream.srcObject=null,this.videoStream.muted=!1,navigator.mediaDevices.getDisplayMedia({audio:{autoGainControl:!1,echoCancellation:!1,googAutoGainControl:!1,noiseSuppression:!1},video:!0}).then(this.startStream)},startStream:function(t){var e=this;this.videoStream.onplay=this.draw,this.videoStream.onloadedmetadata=function(){e.canvas.width=e.rectPreview.endX,e.canvas.height=e.rectPreview.endY,e.scale.x=e.videoStream.videoWidth/e.canvas.width,e.scale.y=e.videoStream.videoHeight/e.canvas.height,e.videoStream.muted=!0},this.canvas.onmousemove=this.getMousePosition,this.canvas.onmousedown=this.startRect,this.canvas.onmouseout=this.stopRect,this.canvas.onmouseup=this.stopRect,this.videoStream.srcObject=t,this.videoStreamSrc=t},getMousePosition:function(t){var e=this.canvas.getBoundingClientRect(),r=e.left,i=e.top,n=this.canvas.width/this.canvas.clientWidth,s=this.canvas.height/this.canvas.clientHeight;this.mousePosition.x=parseInt((t.clientX-r)*n),this.mousePosition.y=parseInt((t.clientY-i)*s)},startRect:function(t){t.preventDefault(),t.stopPropagation(),this.rect.startX=this.mousePosition.x,this.rect.startY=this.mousePosition.y,this.mouseDown=!0},stopRect:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),this.mouseDown){this.rect.endX=this.mousePosition.x,this.rect.endY=this.mousePosition.y;var r={x:this.rectPreviewWidth/this.canvas.width,y:this.rectPreviewHeight/this.canvas.height};this.rectPreview.endX=this.rectPreview.startX+this.rect.endX*r.x,this.rectPreview.endY=this.rectPreview.startY+this.rect.endY*r.y,this.rectPreview.startX+=this.rect.startX*r.x,this.rectPreview.startY+=this.rect.startY*r.y,Object.keys(this.rectPreview).forEach((function(t){return e.rectPreview[t]=parseInt(e.rectPreview[t])})),this.mouseDown=!1}},reset:function(){this.rectPreview={startX:0,startY:0,endX:1920,endY:1080}},draw:function(){0!=this.rectPreviewHeight&&0!=this.rectPreviewWidth||this.reset(),this.ctx.drawImage(this.videoStream,parseInt(this.rectPreview.startX*this.scale.x),parseInt(this.rectPreview.startY*this.scale.y),parseInt(this.rectPreviewWidth*this.scale.x),parseInt(this.rectPreviewHeight*this.scale.y),0,0,this.canvas.width,this.canvas.height),this.mouseDown&&(this.ctx.strokeStyle="#2196f3",this.ctx.lineWidth=5,this.ctx.strokeRect(this.rect.startX+.5,this.rect.startY+.5,this.mousePosition.x-this.rect.startX+.5,this.mousePosition.y-this.rect.startY+.5)),window.requestAnimationFrame(this.draw)},toggleRecording:function(){this.startRecord?this.startRecording():this.stopRecording()},stopRecording:function(){var t;clearInterval(this.timer),this.duration="00:00:00",null===(t=this.recorder)||void 0===t||t.stop()},startTimer:function(){this.startTime=Date.now(),this.timer=setInterval(this.updateTimer,1e3)},startRecording:function(){var t=this;this.startTimer();var e=[],r=this.canvas.captureStream(25).getTracks()[0],i=this.videoStream.captureStream().getTracks().find((function(t){return"audio"==t.kind})),n=[];n.push(r),i&&n.push(i);var s=new MediaStream(n);this.recorder=new MediaRecorder(s,{mimeType:"video/webm; codecs=vp9,opus"}),this.recorder.start(),this.recorder.ondataavailable=function(t){e.push(t.data)},this.recorder.onstop=function(){var r=new Blob(e,{type:"video/webm"}),i=URL.createObjectURL(r);t.downloadVideo(i)}},downloadVideo:function(t){var e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=t,e.download="clip-".concat(Date.now()),e.click(),URL.revokeObjectURL(t)}}},R=k,X=(r("51cd"),r("8336")),Y=r("a523"),O=Object(c["a"])(R,m,w,!1,null,"6da97220",null),j=O.exports;u()(O,{VBtn:X["a"],VContainer:Y["a"]}),i["a"].use(f["a"]);var _=[{path:"/",name:"Home",component:j}],C=new f["a"]({mode:"history",base:"/",routes:_}),T=C,D=r("f309");i["a"].use(D["a"]);var W=new D["a"]({});i["a"].config.productionTip=!1,new i["a"]({router:T,vuetify:W,render:function(t){return t(p)}}).$mount("#app")},7633:function(t,e,r){},"85ec":function(t,e,r){},"975b":function(t,e,r){},b313:function(t,e,r){"use strict";r("975b")}});
//# sourceMappingURL=app.9fadd825.js.map